# 테스트를 위한 객체 만들기 (네트워크 연결 없이 동작하는 테스트)

## 1. Test Double
테스트 더블은 무엇일까요? **테스트 더블이란 테스트를 진행하기 어려운 경우 이를 대신하여 테스트를 진행할 수 있도록 만들어주는 객체를 말합니다.** 테스트하는 동안에는 테스트 더블과 실제 객체를 잠깐 바꿔치기해서 테스트를 진행하는 것이지요. 영화나 드라마에서 위험한 장면을 촬영하기 위해 스턴트 배우가 대신해 주는 것과 비슷한 맥락으로 이해할 수 있습니다. <br>

테스트 더블은 이런 역할을 할 수 있습니다!

- 테스트 대상 코드를 격리합니다.
- 테스트 속도를 개선합니다.
- 예측 불가능한 실행 요소를 제거합니다.
- 특수한 상황을 시뮬레이션합니다.
- 감춰진 정보를 얻어냅니다.

<br>

### ✐ 테스트 더블의 종류

테스트 더블에는 Dummy, Stub, Fake, Spy, Mock 등이 있습니다. **테스트 더블마다 역할이 다르지만 사실 명확한 기준으로 구분해서 사용하는 것은 아닙니다.** 그렇기 때문에 명확한 구분선을 찾기보다는 흐름에 따라 이해하는 편이 좋을 것 같습니다 :)

<br>

### 1. Dummy (모조의, 가짜의)
Dummy는 가장 기본적인 테스트 더블입니다. 어떤 기능이 구현되어 있지 않은, 단지 인스턴스화된 객체로 사용되기 때문에 Dummy의 메서드는 정상적으로 동작하지 않습니다. 객체를 **전달**하기 위한 목적으로 주로 사용됩니다.

<br>

### 2. Stub (쓰다 남은 물건의 토막, 남은 부분)
Stub은 Dummy가 실제로 동작하는 것처럼 만들어 실제 코드를 대신해서 동작해 주는 객체입니다. 테스트가 곤란한 부분의 객체를 도려내어 그 역할을 최소한으로 대신해 줄 만큼만 간단하게 구현되어 있습니다.

<br>

### 3. Fake
Fake는 Stub보다 구체적으로 동작해서 실제 로직처럼 보이지만 실제 앱의 동작에서는 적합하지 않은 객체를 말합니다. 로직 자체는 실제 앱의 코드와 비슷하지만 그 동작을 단순화하여 구현한 객체를 Fake 객체라고 합니다.

<br>

### 4. Spy
Spy는 Stub의 역할을 가지면서 호출된 내용에 대한 방법 혹은 과정 등 약간의 정보를 기록하는 객체입니다. 예를 들어, 호출되었는지, 몇 번 호출되었는지 등에 대한 정보를 기록할 수 있습니다.

<br>

### 5. Mock
실제 객체와 가장 비슷하게 구현된 수준의 객체라고 할 수 있습니다. Stub이 `상태 기반 테스트(State Base Test)`라면 Mock은 `행위 기반 테스트(Behavior Base Test)`라고 이야기하기도 합니다. 여기서 상태 기반 테스트는 메서드를 호출하고 그 결괏값과 예상 값을 비교하는 식으로 동작하는 테스트를 말하고, 행위 기반 테스트는 예상되는 행위들에 대한 시나리오를 만들어 놓고, 시나리오대로 동작했는지에 대한 여부를 확인하는 것입니다. 

<br>



> ### 🤔 구분이 잘 안돼요!
> 이렇게 말로써 구분을 짓기도 하지만 실제로는 Mock을 다른 테스트 더블을 아우르는 것으로 사용하는 경우도 허다합니다.  앞서 말한 대로 이러한 테스트 더블들이 명확하게 구분되어서 사용되는 것은 아닙니다. 그런데 왜 이렇게 모호할 수도 있는 테스트 더블을 구분해서 정의해두었을까요? 이렇게 구분해둔 이유는 테스트를 읽기 쉽게 해주기 위해서라고 할 수 있습니다. 네이밍의 기준은 모호할 수 있지만 그것에 대해 약속이 되어있다면 이름만 보더라도 역할을 유추해낼 수 있을 테니까요.

