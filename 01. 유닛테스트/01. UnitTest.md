
# 테스트 코드?   
테스트라는 것이 어떤 의미를 가지는지는 아마 프로그래밍이 아닌 일상의 예를 들어보더라도 쉽게 와닿을 수 있을 것 같습니다. 예를 들어 축구공의 내구성을 테스트하지 않으면 우리는 언제 터져버릴지도 모르는 축구공을 가지고 경기를 하게 되겠지요? 테스트를 한다는 것은 **안정성**을 보장하는 것입니다. 우리가 작성하는 코드도 같은 맥락으로 테스트를 통해서 **안정성**을 더 높일 수 있습니다. <br>

`테스트 코드를 작성하면 좋다!`는 말은 아마 많이 들어보셨을 것 같습니다! 테스트를 작성하면 코드의 안정성을 높일 수 있고, 유지 보수에 유리해지고, 스펙을 문서화할 수도 있고, 더 깔끔한 코드를 작성할 수 있고.. 등 여러 가지 이점이 있다는 것도 들어보셨을 것 같습니다. 

하지만 테스트의 중요성 혹은 이점에 대해서 알기는 쉽지만 테스트를 실제로 작성해보는 것에 대해서는 난해함을 겪은 분들도 꽤 있으셨을 거라 예상됩니다! 아마 테스트라는 게 생소하기도 하고, 기준이 모호한 지점도 많기 때문이겠죠? <br>

`Unit Test 작성하기` 코스에서는 테스트 코드에 대해서 좀 더 익숙해지는 시간을 가져보려고 해요. 어떤 명확한 정답이나 기준을 제시해드리기는 어렵겠지만 유닛 테스트에 대한 이해를 돕고 테스트에 대한 기준을 만들기 위한 초석을 닦을 수 있는 시간이 되시길 바랍니다 :) <br>

우선 이 페이지에서는 테스트 코드에 대해서 간단하게 알아보도록 하겠습니다! 가볍게 읽고만 지나가도 좋아요.

<br>

## 🤔 테스트는 어떻게 이루어지나요?
간단한 예시로 설명을 하자면, 테스트는 이렇게 `예상 값`과 `결괏값`을 비교하는 식으로 진행됩니다. 조금 복잡한 로직일지라도 어떤 결과가 나와야 하는지를 예상한 값과 그 결과를 비교해 주면 우리 예상대로 동작하는지를 확인할 수 있겠네요!

```swift
func testArraySorting() {
    let input = [1, 7, 6, 3, 10]
    let expectation = [1, 3, 6, 7, 10]

    let result = input.sorted()

    XCTAssertEqual(result, expectation)
}
```
* `XCTAssertEqual`은 값이 같은지를 비교하는 메서드입니다.

![1](https://user-images.githubusercontent.com/73867548/131277788-d14cbbe0-c6cd-4993-bfcd-b66297d3d96b.jpg)



<br>

## 🤔 유닛 테스트?
이번 코스에서는 테스트 중에서도 **유닛 테스트**에 대해서 다루어보려고 합니다. 유닛 테스트(Unit Test)는 다른 말로 **단위 테스트**라고도 하는데요, 하나의 함수, 메서드를 기준을 독립적으로 진행되는 가장 작은 단위의 테스트입니다. 그러니까 **메서드를 하나하나 테스트**하는 것과 같은 맥락이라고 볼 수 있습니다. <br>

그렇다면 유닛 테스트는 왜 해야 하는 걸까요? 단위 테스트를 작성하면 해당 부분(메서드)에 대해서 독립적으로 테스트를 하기 때문에 빠른 리팩토링 반영과 빠른 테스트를 진행할 수 있게 됩니다. 코드의 확장이나 리팩토링 시에도 안정성을 확보한 채로 빠르게 대응할 수 있게 됩니다. 작성을 위해 시간과 노력을 들여야 한다는 점이 문제가 되지 않는다면 작성하는 편이 이점이 많습니다. 작성한 코드가 잘 돌아가는지를 확인하는 거니까요! <br>

유닛 테스트 외에도 통합 테스트, UITest라는 말을 들어보셨을 것 같습니다. 통합 테스트는 단위 테스트보다 더 큰 단위의 테스트로 실제 앱 동작에서처럼 객체와 객체 사이의 동작에 대한 테스트가 주로 이루어집니다. UITest는 UI에 대한 사용성을 테스트하는 것인데 비용이 많이 들뿐더러 실제 사용성과는 다소 차이가 있다는 이유로 유닛 테스트에 비하면 많이 사용되지 않고 있습니다.

<br>

## 🤔 테스트가 가능한 코드?
`테스트가 가능한 코드`라는 말을 들어보셨나요?! 코드를 작성했다고 모든 코드에 대해서 테스트를 작성할 수 있는 것은 아니랍니다.       
테스트를 작성하기 위해서는 테스트가 가능한 코드를 짜는 것이 중요합니다. 예를 들어 의존성이 너무 강해서 메서드 외부 코드의 영향을 매우 많이 받고 있다면 테스트하기가 까다롭겠지요? 왜냐면 테스트는 통제된 환경에서 이루어져야 정상적인 테스트가 가능할 테니까요. 테스트가 가능한 코드에 대해서는 [WWDC 2017 - Engineering For Testability](https://developer.apple.com/videos/play/wwdc2017/414/?time=1399) 여기 WWDC를 보는 것도 도움이 될 것 같습니다.

<br>

## 🤔 FIRST 원칙
좋은 단위 테스트를 위해 지켜야 하는 것으로 소개되는 FIRST라는 원칙이 있습니다. 테스트 코드를 작성하실 때 천천히 생각해 보시면 좋을 것 같아요 :)

- `Fast`   
테스트는 빠르게 동작할 수 있어야 합니다. 실제 프로젝트에서는 수많은 테스트 코드를 작성하게 될 텐데 테스트가 느리게 동작한다면 테스트를 실행하는 데에만 몇 분의 시간이 소요될 것입니다. 테스트 코드는 빠르게 확인하고, 수정하고 반영하는 데에 큰 의미가 있기 때문에 속도가 느린 테스트는 테스트 코드의 의미 중 많은 부분을 잃어버린 것과 같다고 볼 수 있습니다. 

- `Independent/Isolated`   
각각의 테스트는 서로 독립적이며 서로 의존해서는 안 됩니다. 좋은 단위 테스트는 최소한의 단위의 테스트에 집중할 수 있게 각 테스트들이 서로에게 영향을 주어서는 안됩니다. 만약 다른 코드에 의존성이 높거나 영향을 많이 주고받고 있는 경우에는 완전히 통제된 상황에서 테스트를 진행하기 어려울 수 있으며 테스트가 실패하게 되었을 경우 그 원인이 불분명한 경우가 발생할 수 있습니다.

- `Repeatable`   
테스트는 언제 어디서나 같은 결과가 반복되어야 합니다. 즉 모든 환경을 통제하여 매번 예상한 결과대로 테스트가 진행되게 해야 합니다. 이를 위해서 통제가 어려운 부분에 대해서는 **테스트를 위한 객체**를 만들어주는 방법을 선택하기도 합니다.

- `Self-Validating`    
테스트는 Bool을 이용하여 성공/실패에 대해서 스스로 검증이 가능해야 합니다. 테스트 코드 내부에서 이 테스트가 잘 동작했는지를 판별할 수 있어야 합니다. 

- `Timely`    
이상적인 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현해야 합니다. 만약 실제 코드를 구현한 후에 테스트 코드를 작성할 경우 테스트하기가 매우 까다롭거나 불가능하도록 설계가 되어있을 지도 모릅니다.

<br>